{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// src/js/pixabay-api.js\n\nimport axios from 'axios';\n\nconst param = [\n   { name: 'key', value: '52802727-e127d4f3f7eb26b70bb46f136' },\n   { name: 'image_type', value: 'all' },\n   { name: 'orientation', value: 'all' },\n   { name: 'safesearch', value: true }\n];\n\nconst url = `https://pixabay.com/api/?${param\n   .map(({ name, value }) => `${name}=${value}`)\n   .join('&')}`;\n\nexport function getImagesByQuery(query, nPage, cHits = 20) {\n   const res = axios\n      .get(`${url}&per_page=${cHits}&page=${nPage}&q=${query}`)\n      .then(({ data }) => data)\n      .catch(err => console.log(err));\n   return res;\n}\n","// src/js/render-functions.js\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\n\nimport { getImagesByQuery } from './pixabay-api';\n\nlet lightbox;\n\nfunction nextOn() { document.querySelector('.next').classList.remove('off'); };\n\nexport function nextOff() { document.querySelector('.next').classList.add('off'); };\n\nexport function loaderOn() { document.querySelector('.loader').classList.remove('off'); };\n\nfunction loaderOff() { document.querySelector('.loader').classList.add('off'); };\n\nexport function clearGallery() { document.querySelector('.gallery').innerHTML = ''; }\n\nexport function getImagesPageQuery(query, nPage, cHits) {\n   getImagesByQuery(query, nPage, cHits)\n      .then(data => {\n         const totalPage = Math.trunc(data.totalHits / cHits);\n         const images = data.hits;\n         if (images.length === 0) {\n            iziToast.info({\n               message: 'No images found'\n            });\n            return;\n         }\n\n         createGallery(images);\n         if (nPage <= totalPage) {\n            nextOn();\n         } else {\n            nextOff();\n            iziToast.info({\n               message: 'We\\'re sorry, but you\\'ve reached the end of search results.'\n            });\n         }\n\n         if (lightbox) {\n            lightbox.refresh();\n         } else {\n            lightbox = new SimpleLightbox('.gallery a', {\n               captionsData: 'alt',\n               captionDelay: 250\n            });\n         }\n      })\n\n      .catch(err => console.log(err))\n      .finally(() => loaderOff());\n};\n\nfunction createGallery(images) {\n   const markup = images.map((image) => {\n      return `\n         <li class=\"cart\">\n            <a class=\"photo_link\" href=\"${image.largeImageURL}\">\n               <img \n                  class=\"photo_image\"\n                  src=\"${image.webformatURL}\"\n                  alt=\"${image.tags}\"\n                  height=\"152px\" />\n            </a>\n            <div class=\"photo_info\">\n               <p><b>Likes:</b> ${image.likes}</p>\n               <p><b>Views:</b> ${image.views}</p>\n               <p><b>Comments:</b> ${image.comments}</p>\n               <p><b>Downloads:</b> ${image.downloads}</p>\n            </div>\n         </li>`;\n   }).join('');\n   document.querySelector('.gallery').insertAdjacentHTML('beforeend', markup);\n};\n","// src/main.js\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { loaderOn, nextOff, getImagesPageQuery, clearGallery } from './js/render-functions';\n\nlet query;\nlet nPage = 1;\nconst cHits = 15;\n\ndocument.querySelector('.form').addEventListener('submit', onSubmit);\ndocument.querySelector('.next').addEventListener('click', onNext);\n\nfunction onSubmit(event) {\n   event.preventDefault();\n\n   query = document.querySelector('.input').value.trim();\n   document.querySelector('.input').value = '';\n\n   if (!query) {\n      iziToast.warning({\n         title: 'Warning',\n         message: 'Please enter a search query.'\n      });\n      return;\n   };\n\n   loaderOn();\n\n   clearGallery();\n\n   getImagesPageQuery(query, nPage, cHits);\n};\n\nfunction onNext(event) {\n   event.preventDefault();\n\n   nextOff();\n   loaderOn();\n\n   nPage++;\n\n   getImagesPageQuery(query, nPage, cHits);\n};\n"],"names":["param","url","name","value","getImagesByQuery","query","nPage","cHits","axios","data","err","lightbox","nextOn","nextOff","loaderOn","loaderOff","clearGallery","getImagesPageQuery","totalPage","images","iziToast","createGallery","SimpleLightbox","markup","image","onSubmit","onNext","event"],"mappings":"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"}